# 计算机网络概述

## 第一章


### 2020-02-10
局域网-  
    - 覆盖范围较小 设备自己买 宽带固定 10米 10M/100M/1000M
    - 注意设备:接入层设备 汇聚层设备
- 广域网:距离远 花钱买带宽
- Internet:ISP 自己的机房 对网民提供自己的Internet连接




```
有时候选择电信下载还是网通下载
就是资源在电信运营商或者网通运营商的服务器上放着
此时我们根据自己的网络制式选择网络就好

有些双线机房一个服务器两个地址
一个电信的一个网通的

中国互联网有很多运营商
每个运营商都可以访问别的运营商也有国际出口

我们所说的带宽是8M代表我们到运营商的带宽
```

### 计算机数据通信的过程

```
[c1]
    \  
[c2]-[switch1]-[R1]-[R2]-[server1]
    /
[c3]  
```

#### c1要访问server1上的资源
- c1->server1请求的过程
    - c1先通过c1的mac地址发送到switch1
    - switch1在通过mac地址发送到R1
    - R1在通过mac地址发送到R2
    - R2在通过mac地址发送到server1
    - 检查IP地址是c1的目标地址整个请求过程完毕
- server1->c1返回数据的过程
    - server1把c1要的数据分为几份[a,b,c,d]发送加入到路由器的缓存中
    - 先发送a,通过上述的过程给c1
    - c1确认接收后并给server1一个确认请求
    - server1发送b
    - ...
    - server1发送完毕

```
路由器的作用:在不同的网段之间转发数据

IP地址决定了数据包最终到哪儿去
mac地址决定了数据包下一跳去哪儿
如果全球的计算机都用交换机连接则可以不用IP地址
```

### osi参考模型
- 应用层:所有能产生网络流量的程序
- 表示层:在传输之前是否进行加密或者压缩图片 二进制/ASCII
- 会话层
    - 访问百度然后百度服务器返回来的数据在百度的那个标签显示而不是在别的标签显示这由会话层控制
    - 可以通过这个查木马
    - netstat -n 
- 传输层:控制数据传输，传输-确认 流量控制
    - 可靠传输与不可靠传输
- 网络层:负责选择最佳路径  规划ip地址
- 数据链路层:定义帧的开始和结束
    - 通过特殊的标志位表示数据的开头和结尾
    - 数据中还包括校验位
- 物理层
    - 定义了物理层接口的标准 
    - 电器标准 
    - 如何在物理链路层上传输更快

#### 分层的好处

#### 利用osi参考模型进行网络故障排查
   [应用层]
   [表示层]  
   [会话层]   
   [传输层]  
   [网络层]   
   [数据链路层]  
    [物理层]

```
底层想上层提供服务
如果底层出现问题上层全部瘫痪
所以排查错误应该从底层向上层排查错误
```

- 物理层故障:
    - 查看链接状态 发送和接收的数据报
- 数据链路层故障
    - mac地址冲突
    - ADSL欠费，导致数据链路层断开，网络不通
    - 交换机强制指定网速导致网速协商不一致
- 网络层故障
    - 没有配网关(网络出口地址)
    - 配置了错误的网关/子网掩码/ip
    - 路由器上没有配置到达目标网络的信息
- 应用层故障
    - 应用程序配置错误
    - 浏览器设置了错误的代理

#### OSI参考模型和网络安全
- 物理层安全
    - 把用不到的网线从交换机拔掉
- 数据链路层安全 
    - ADSL账号密码
    - 交换机端口绑定mac地址
    - VLAN
    - 交换机端口绑定MAC地址
- 网络层安全
    - 路由器上使用ACL控制数据流量
- 应用层安全
    - 开发的应用是否有漏洞

#### TCP/IP洗衣和OSI参看模型

OSI参考模型   TCP/IP协议栈
[应用层]      [      |     |    ]
[表示层]      | HTTP | FTP | DNS|
[会话层]      |      |     |    |
[传输层]      | TCP  | UDP      |  
[网络层]      | IP/ARP ICMP/IGMP|  
[数据链路层]   |   Frame Relay   |
[物理层]      |Ethernet ATM     |



#### 数据封装
|目标mac地址源mac地址|目标ip地址源ip地址|源端口目标端口|数据|FCS|
|                                  |<--数据段or消息-->|
|                  |<--------------数据报------------>|
|<----------------------------数据帧--------------------->|

- 计算机在接收到数据帧后，需要去掉为数据传输而添加的附加信息这称为解封装

#### 客户进程和服务端进程使用TCP/IP协议通信

```
   <客户端>                                   <服务端>
______________                           ______________
|            | ---客户端发起连接建立请求---> |            |
|   应用层    |                           |    应用层   |
|            | <--服务端接受连接建立请求---- |            |
|------------|                           |------------|
|   运输层    |                           |   运输层    |
|------------|                           |------------|
|   网络层    |                           |   网络层    |
|------------|                           |------------|
| 数据链路层   |                           |  数据链路层  |
|------------|                           |------------|
|    物理层   |                           |    物理层   |
|------------|                           |------------|
```

#### 计算机网络的性能指标
mac

1. 速率
    - 连接在计算机网络上的主机在(单个)数字信道上传输数据位数的速率，也称为data rate或bit rate,单位是b/s、kb/s|Mb/s,Gb/s
2. 带宽
3. 吞吐量
    - 在单位时间内通过某个网络的数据量
4. 时延:又称为延迟
    - 数据块长度(比特)/信道带宽(比特/秒)
5. 时延带宽积
6. 往返时间RTT(Route-Trip Time):从去到来的"时间"(路由器跳数)
7. 利用率:
    - 信道利用率
        有数据通过的时间/(有+无)数据通过的时间
    - 网络利用率
        - D=D0/(1-U)
        - D0表示网络空闲时的时延
        - D表示网络当前的时延
        - U表示信道利用率



## 第二章:物理层
- 2.1 物理层的基本概念
- 2.2 数据通信的基础知识
- 2.3 物理层下面的传输媒体
- 2.4 信道复用技术
- 2.5 数字传输系统
- 2.6 宽带接入技术

### 2.1 物理层的基本概念
物理层解决如何连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体
物理层的主要任务描述为:确定传输媒体接接口的一些特性
例如:
- 机械特性
    - 例如接口形状,大小,引线数目
    - 例如各个公司制造的网线接口都是一样的
- 电气特性:例如规定电压的范围
- 功能特性:例如规定-5v代表0,+5v代表1
- 过程特性:也称为规程特性,规定建立连接时各个相关不见的工作步骤


###  2.2 数据通信的基础知识
    - 典型的数据通信模式
[PC机] --数字比特流--> 
[调制解调器]--模拟信号-->
{公用电话网}--模拟信号-->
[调制解调器]--数字比特流-->
[PC机]

#### 相关术语

- 数据(data):运送消息的实体
- 信号(signal):数据的电气/电磁的表现
- "模拟信号":代表消息的参数的取值是连续的
- "数字信号":代表消息的参数的取值是离散的

```
 _____                              _____
 | A |      _-_-_-_-(01010101)      | B |
 -----                              -----

如图:
    A计算机向B计算机传输数据(01010101)
    AB计算机通过网线连接而网线只能传输电信号
    网线通过"有电没电"的方式来代表0和1

```

- 码元(code) 在试用时间域的波形表示数字信号时,则代表不同离散数值的基本波形称为码元
    - 上图中的01010101数据代表的波形_-_-_-_-为一个码元
    - 在数字通信中常常用时间间隔相同的符号来代表一个二进制数字,
    - 这样的时间间隔内的信号称为二进制码元
    - 而这个时间间隔称为码元长度
    - 一般1码元携带1bit的信息量(_或-)
    - 1码元也可以携带nbit的信息量
        - 在只有0和1的系统中一码元代表一个比特位
        - 如果一个系统中有0/1(01)/2(10)/3(11)/4(100)/5(101)/6(110)/7(111)
        - 在这种情况下一个码元如果代表7即111,则一个码元代表3bit信息

#### 数据通信的基础知识
```
信道一般表示像一个方向传输信息的媒体.
所以咱们说平常的信道线路旺旺包含一条发送信息的信道和一条接收信息的信道
```

- 单项通信(单工通信):只能有一个方向通信而没有反方向的交互
- 双向交替通信(半双工通信):通信的双方都可以发送信息,但不能同时发送
- 双向同时通信(全双工通信):通信的双方可同时发送和接收信息

- 基带(baseband)信号和带通(band pass)信号
    - 基带信号:即基本频带信号--来自信号源的信号


### 2.3 物理层下面的传输媒体
### 2.4 信道复用技术
### 2.5 数字传输系统
### 2.6 宽带接入技术