# 计算机网络概述

## 第一章


### 2020-02-10
局域网-  
    - 覆盖范围较小 设备自己买 宽带固定 10米 10M/100M/1000M
    - 注意设备:接入层设备 汇聚层设备
- 广域网:距离远 花钱买带宽
- Internet:ISP 自己的机房 对网民提供自己的Internet连接




```
有时候选择电信下载还是网通下载
就是资源在电信运营商或者网通运营商的服务器上放着
此时我们根据自己的网络制式选择网络就好

有些双线机房一个服务器两个地址
一个电信的一个网通的

中国互联网有很多运营商
每个运营商都可以访问别的运营商也有国际出口

我们所说的带宽是8M代表我们到运营商的带宽
```

### 计算机数据通信的过程

```
[c1]
    \  
[c2]-[switch1]-[R1]-[R2]-[server1]
    /
[c3]  
```

#### c1要访问server1上的资源
- c1->server1请求的过程
    - c1先通过c1的mac地址发送到switch1
    - switch1在通过mac地址发送到R1
    - R1在通过mac地址发送到R2
    - R2在通过mac地址发送到server1
    - 检查IP地址是c1的目标地址整个请求过程完毕
- server1->c1返回数据的过程
    - server1把c1要的数据分为几份[a,b,c,d]发送加入到路由器的缓存中
    - 先发送a,通过上述的过程给c1
    - c1确认接收后并给server1一个确认请求
    - server1发送b
    - ...
    - server1发送完毕

```
路由器的作用:在不同的网段之间转发数据

IP地址决定了数据包最终到哪儿去
mac地址决定了数据包下一跳去哪儿
如果全球的计算机都用交换机连接则可以不用IP地址
```

### osi参考模型
- 应用层:所有能产生网络流量的程序
- 表示层:在传输之前是否进行加密或者压缩图片 二进制/ASCII
- 会话层
    - 访问百度然后百度服务器返回来的数据在百度的那个标签显示而不是在别的标签显示这由会话层控制
    - 可以通过这个查木马
    - netstat -n 
- 传输层:控制数据传输，传输-确认 流量控制
    - 可靠传输与不可靠传输
- 网络层:负责选择最佳路径  规划ip地址
- 数据链路层:定义帧的开始和结束
    - 通过特殊的标志位表示数据的开头和结尾
    - 数据中还包括校验位
- 物理层
    - 定义了物理层接口的标准 
    - 电器标准 
    - 如何在物理链路层上传输更快

#### 分层的好处

#### 利用osi参考模型进行网络故障排查
   [应用层]
   [表示层]  
   [会话层]   
   [传输层]  
   [网络层]   
   [数据链路层]  
    [物理层]

```
底层想上层提供服务
如果底层出现问题上层全部瘫痪
所以排查错误应该从底层向上层排查错误
```

- 物理层故障:
    - 查看链接状态 发送和接收的数据报
- 数据链路层故障
    - mac地址冲突
    - ADSL欠费，导致数据链路层断开，网络不通
    - 交换机强制指定网速导致网速协商不一致
- 网络层故障
    - 没有配网关(网络出口地址)
    - 配置了错误的网关/子网掩码/ip
    - 路由器上没有配置到达目标网络的信息
- 应用层故障
    - 应用程序配置错误
    - 浏览器设置了错误的代理

#### OSI参考模型和网络安全
- 物理层安全
    - 把用不到的网线从交换机拔掉
- 数据链路层安全 
    - ADSL账号密码
    - 交换机端口绑定mac地址
    - VLAN
    - 交换机端口绑定MAC地址
- 网络层安全
    - 路由器上使用ACL控制数据流量
- 应用层安全
    - 开发的应用是否有漏洞

#### TCP/IP洗衣和OSI参看模型

OSI参考模型   TCP/IP协议栈
[应用层]      [      |     |    ]
[表示层]      | HTTP | FTP | DNS|
[会话层]      |      |     |    |
[传输层]      | TCP  | UDP      |  
[网络层]      | IP/ARP ICMP/IGMP|  
[数据链路层]   |   Frame Relay   |
[物理层]      |Ethernet ATM     |



#### 数据封装
|目标mac地址源mac地址|目标ip地址源ip地址|源端口目标端口|数据|FCS|
|                                  |<--数据段or消息-->|
|                  |<--------------数据报------------>|
|<----------------------------数据帧--------------------->|

- 计算机在接收到数据帧后，需要去掉为数据传输而添加的附加信息这称为解封装

#### 客户进程和服务端进程使用TCP/IP协议通信

```
   <客户端>                                   <服务端>
______________                           ______________
|            | ---客户端发起连接建立请求---> |            |
|   应用层    |                           |    应用层   |
|            | <--服务端接受连接建立请求---- |            |
|------------|                           |------------|
|   运输层    |                           |   运输层    |
|------------|                           |------------|
|   网络层    |                           |   网络层    |
|------------|                           |------------|
| 数据链路层   |                           |  数据链路层  |
|------------|                           |------------|
|    物理层   |                           |    物理层   |
|------------|                           |------------|
```

#### 计算机网络的性能指标
mac

1. 速率
    - 连接在计算机网络上的主机在(单个)数字信道上传输数据位数的速率，也称为data rate或bit rate,单位是b/s、kb/s|Mb/s,Gb/s
2. 带宽
3. 吞吐量
    - 在单位时间内通过某个网络的数据量
4. 时延:又称为延迟
    - 数据块长度(比特)/信道带宽(比特/秒)
5. 时延带宽积
6. 往返时间RTT(Route-Trip Time):从去到来的"时间"(路由器跳数)
7. 利用率:
    - 信道利用率
        有数据通过的时间/(有+无)数据通过的时间
    - 网络利用率
        - D=D0/(1-U)
        - D0表示网络空闲时的时延
        - D表示网络当前的时延
        - U表示信道利用率



## 第二章:物理层
- 2.1 物理层的基本概念
- 2.2 数据通信的基础知识
- 2.3 物理层下面的传输媒体
- 2.4 信道复用技术
- 2.5 数字传输系统
- 2.6 宽带接入技术

### 2.1 物理层的基本概念
物理层解决如何连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体
物理层的主要任务描述为:确定传输媒体接接口的一些特性
例如:
- 机械特性
    - 例如接口形状,大小,引线数目
    - 例如各个公司制造的网线接口都是一样的
- 电气特性:例如规定电压的范围
- 功能特性:例如规定-5v代表0,+5v代表1
- 过程特性:也称为规程特性,规定建立连接时各个相关不见的工作步骤


###  2.2 数据通信的基础知识
    - 典型的数据通信模式
[PC机] --数字比特流--> 
[调制解调器]--模拟信号-->
{公用电话网}--模拟信号-->
[调制解调器]--数字比特流-->
[PC机]

#### 相关术语

- 数据(data):运送消息的实体
- 信号(signal):数据的电气/电磁的表现
- "模拟信号":代表消息的参数的取值是连续的
- "数字信号":代表消息的参数的取值是离散的

```
 _____                              _____
 | A |      _-_-_-_-(01010101)      | B |
 -----                              -----

如图:
    A计算机向B计算机传输数据(01010101)
    AB计算机通过网线连接而网线只能传输电信号
    网线通过"有电没电"的方式来代表0和1

```

- 码元(code) 在试用时间域的波形表示数字信号时,则代表不同离散数值的基本波形称为码元
    - 上图中的01010101数据代表的波形_-_-_-_-为一个码元
    - 在数字通信中常常用时间间隔相同的符号来代表一个二进制数字,
    - 这样的时间间隔内的信号称为二进制码元
    - 而这个时间间隔称为码元长度
    - 一般1码元携带1bit的信息量(_或-)
    - 1码元也可以携带nbit的信息量
        - 在只有0和1的系统中一码元代表一个比特位
        - 如果一个系统中有0/1(01)/2(10)/3(11)/4(100)/5(101)/6(110)/7(111)
        - 在这种情况下一个码元如果代表7即111,则一个码元代表3bit信息

#### 数据通信的基础知识
```
信道一般表示像一个方向传输信息的媒体.
所以咱们说平常的信道线路旺旺包含一条发送信息的信道和一条接收信息的信道
```

- 单项通信(单工通信):只能有一个方向通信而没有反方向的交互
- 双向交替通信(半双工通信):通信的双方都可以发送信息,但不能同时发送
- 双向同时通信(全双工通信):通信的双方可同时发送和接收信息

#### 基带(baseband)信号和带通(band pass)信号
```
基带信号
    即基本频带信号--来自信号源的信号
    想计算机输出的代表各种文字或图像的数据信号都属于基带信号，基带信号就是发出的要直接传输的信号的信号
带通信号
    把信号经过载波调制后，把信号的频率范围转移到较高的频段以便传输(即仅在一个频段内能通过信道)
因此在传输距离较近时计算机采用基带信号传输，因为短距离传输信号衰减不大，信号内容也不会发生改变
如计算机到打印机就是基带信号传输的
```

#### 几种最基本的调制方式

- 调幅(AM):载波的振幅随着基带数字信号而变化
- 调频(FM):载波的频率随着基带数字信号而变化
- 调相(PM):载波的初始相位随着基带数字信号而变化

#### 常用编码

- 单极性不归零编码:只使用一个电压，高电压表示1、没电表示0
- 双极性不归零编码:用正电平和负电平代表1和0、正负幅值相等
- 单极性归零编码:以高电平和零电平分别代表1和0
- 双极性归零编码:用正负零三个电平，信号本身携带同步信息
- 曼彻斯特编码
```
低到高的跳变为0: _|-
高到低的跳变为1:-|_
采用曼彻斯特码，一个时钟周期指标是一个bit，但它能携带时钟信号，且可以表示没有数据传输
```
- 差分曼彻斯特编码
```
bit与bit之间有信号跳变表示下一个bit为0
    0  0
-|_-|_-|_


bit与bit之间没有信号跳变表示下一个bit为1
    1  1
-|__|--|_

差分曼彻斯特编码抗干扰性强于曼彻斯特编码
```

### 2.3 物理层下面的传输媒体

#### 导向传输媒体

- 导向传输媒体中，电磁波沿着固体传播
    - 双绞线
        - 屏蔽双绞线STP:有屏蔽层
        - 无屏蔽双绞线UTP:没有屏蔽层
    - 同轴线缆
        - 50欧姆电缆用于数字传输，也叫基带同轴电缆
        - 75欧姆电缆用于模拟传输，即带宽同轴电缆
    - 光缆
        - 多模光纤
        - 单模光纤:有线电视常用单模光纤
    

#### 非导向传输媒体(主要指无线传输)

```
非导向传输媒体就是指自由空间
其中的电磁波传输被称为无线传播

无线传输所使用的频段很广
短波通信主要是靠电离层的反射,但短波通信的通信质量较差
```

- 微波在空间主要是直线传播
    - 地面微波接力通信
    - 卫星通信

#### 物理层设备-集线器(现在很少用到)
```
工作特点:它在网络中农只起到信号放大作用和重发作用
其目的是扩大网络的传输的范围
而不具备信号的定向功能(hub上连接着ABCD四台主机,A->B的信息它也发送给C和D只是C和D接收到后发现其Mac地址是B而是不自己所以不处理,如果此时在C上安装抓包软件C也可看到A和B通信的内容)

宽带共用
集线器是一个大的冲突域
当集线器连接的主机增多
其冲突也增加，如果发生冲突则要在下一个随机事件再发送
```

### 2.4 信道复用技术

> 复用(multiplexing)是通信技术的基本概念

#### 频分复用FDM(Frequency Divsion Multiplexing)
```
频分复用的所有用户在同样的时间不用不同得到带宽资源
## 注意 ##
这里的带宽是评率带宽而不是数据的发送带宽

A1->A2
B1->B2
C1->C2

A1 B1 C1这三个人给A2 B2 C2发送语音
A1的语音dataA通过a载波
B1的语音dataB通过b载波
C1的语音dataC通过c载波

载波完之后一起发送到接后端在把A1 B1 C1的语音分开
```

#### 时分复用TDM(Time Divsion Multiplexing)
```

时分复用可能会造成线路资源的浪费
使用
```


#### 统计时分复用
#### 波分复用WDM()
```

```

### 2.5 数字传输系统

> 主要用于广域网传输

```
脉码调制PCM体质最初是为了在电话局之间的中继线上传送多路的电话
由于历史原因,PCM有两个互不兼容的国际标准,即北美的24路PCM(简称T1)和欧洲的30路PCM(简称E1)
我国采用的事欧洲E1标准
E1的速率是2.048Mb/s 而T1的速率是1.544Mb/s
当需要有更高的速率时,可采用复用技术

E1
8000(次采样美妙) * 8 * 32(路时分复用)
```

### 2.6 宽带接入技术

> 普通网名通过什么技术介入互联网

#### XDSL(用数字技术对现有的模拟电话用户进行改造)
```
标准的模拟电话信号的平带被限制在300-3400Hz的范围
但用户线本身实际可通过的信号频率任然超过1MHz
xDSL技术把0-4kHz地段频谱留给传统电话使用
而把原来没有被利用的高段频谱留给用户上网
```



