# 操作系统原理_清华大学

### uCore
### https://github.com/chyyuu/mooc_os_lab

### 操作系统实验

- 实验0:准备
- 实验1:系统启动及终端
- 实验2:物理内存管理
- 实验3:虚拟内存管理
- 实验4:内核线程管理
- 实验5:用户进程管理
- 实验6:CPU调度
- 实验7:同步与互斥
- 实验8:文件系统

### 预备知识

- 计算机结构原理(Intel 80386)
- 数据结构
- C和汇编语言

### 什么是操作系统

#### 用户角度上()

- 操作系统是一个软件
- 管理应用程序
- 为应用程序提供服务
- 杀死应用程序

#### 资源管理

- 管理外设、分配资源

操作系统

物理硬件         操作系统
cpu---[抽象]---->进程
磁盘---[抽象]---->文件
内存---[抽象]---->地址空间

#### 操作系统架构层次结构

- 操作系统在硬件之上 
- 操作系统在应用程序之下
    - 应用软件:办公软件、视频播放软件
    - 操作系统位于应用软件之下、为应用软件提供服务支撑
- Linux、Windows、Android的界面属于外壳(shell)、而不是内核(Kernel),Kernel是我们的研究重点、在shell之下

user <=[ shell [os Kernel] shell ]=> user 

- Kernel操作系统内部组件
    - CPU调度器
    - 物理内存管理
    - 虚拟内存管理
    - 文件系统管理
    - 中断处理与设备驱动
- OS Kernel的特征
    - 并发
        - 计算机系统中同时存在多个运行的程序、需要OS管理和调度
        - 并发:一段时间内多个程序可以运行
        - 并行:一个时间点内多个程序运行(一般需要计算机有多个cpu)
    - 共享
        - "同时"访问(分时)
        - 互斥共享(把资源分为多份,每个应用程序一份)
    - 虚拟
        - cpu虚拟化为进程
        - 磁盘虚拟化为文件
        - 内存虚拟化为地址空间
        - 利用多道程序设计技术、让每个用户都觉得有一个计算机专门服务(一台机器虚拟为多台机器)
    - 异步
        - 程序的执行不是一贯到底、而是走走停停、向前推进的速度不可预知
        - 但是要运行环境相同、OS需要保证程序运行的结果也要要相同


### 为什么要去学习操作系统

- 综合课程:结合许多不同的课程
    - 程序设计语言
    - 数据结构
    - 算法
    - 计算机体系结构
    - 材料
    - 操作系统概念和原理、源代码
    - 技能
    - 操作系统的设计和实现
- 已经有了很多操作系统
    - Windows
    - Linux
- 为什么要学习操作系统
    - 操作系统在不停地发展、在工控等各个领域有强烈的需求
    - 操作系统很酷、很有用、有挑战
- 操作系统:计算机科学研究基石之一
    - 计算机系统的基本组成部分
    - 有硬件的发展和应用需求所驱动
    - 学术和工业的持续推进
- 顶尖大学的计算机科学
- 工业界
    - 微软、谷歌、Facebook
- 学术界
    - ACM
    - IEEE
    - USENIX
    - 国内:CCF
- 顶级会议
    - SOSP(每两年,1967-...)
    - USENIX(每两年,1994-...)

- 操作系统的挑战
    - 操作系统很大
    - 实际操作系统
    - 操作系统并发管理
        - 并发导致又去的编程错误
    - 操作系统代码管理原始硬件
        - 时间依赖行为、非法行为、硬件故障
    - 操作系统代码必须是高效的
        - 低耗CPU、内存、磁盘
    - 操作系统出错就意味着机器出错
        - 操作系统必须必用户程序拥有更高的稳定性
    - 操作系统是安全的基础
    - 有些内容已经由硬件本身解决了不需要操作系统解决
        - 磁盘IO调度可有硬件本身管理
    - 系统操作需要权衡
        - 时间与空间
        - 性能和可预测性
            - 性能高且程序什么时候开始什么时候结束都能预测
        - 公平和性能
            - 资源被高效使用
    - 硬件方面、操作系统需要
        - 良好的硬件管理
        - 合理的资源分配
        - eg:硬盘速度跟CPU、内存相差很多、操作系统需要协调处理

### 如何学习操作系统

> 动手

### 操作系统实例

- 面向桌面
- 面向移动终端
- UNIX
- Linux家族
- Windows家族

### 操作系统的历史

### 操作系统的结构

- 微内核的设计,尽可能吧内核功能移到用户控件
    - 内核只放最基本的功能
        - 中断处理
        - 消息传递
        - 像文件系统、内存管理、网络协议以服务的形式存在
    - 代价就是性能


